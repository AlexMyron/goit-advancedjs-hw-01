{"version":3,"file":"commonHelpers.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst form = document.querySelector('.js-form');\nconst STORAGE_KEY = 'feedback-form-state';\n\nfunction fillForm(form) {\n  const storageValue = localStorage.getItem(STORAGE_KEY);\n  if (storageValue) {\n    const { email, message } = JSON.parse(storageValue);\n\n    form.elements.email.value = email;\n    form.elements.message.value = message;\n  }\n}\n\nfunction saveFormValue(form) {\n  const throttledSave = throttle(() => {\n    const storageData = localStorage.getItem(STORAGE_KEY);\n    const parsedData = storageData ? JSON.parse(storageData) : {};\n    const formData = [...form.elements].reduce((acc, el) => {\n      if (el.name) {\n        acc[el.name] = el.value;\n      }\n      return acc;\n    }, {});\n\n    localStorage.setItem(\n      STORAGE_KEY,\n      JSON.stringify({ ...parsedData, ...formData })\n    );\n  }, 500);\n\n  form.addEventListener('input', throttledSave);\n}\n\nfunction handleSubmit(e) {\n  e.preventDefault();\n  const { email, message } = e.target.elements;\n\n  if (!email.value || !message.value) return;\n\n  console.log({ email: email.value, message: message.value });\n  email.value = '';\n  message.value = '';\n  localStorage.removeItem(STORAGE_KEY);\n}\n\nfillForm(form);\nsaveFormValue(form);\nform.addEventListener('submit', handleSubmit);\n"],"names":["form","STORAGE_KEY","fillForm","storageValue","email","message","saveFormValue","throttledSave","throttle","storageData","parsedData","formData","acc","el","handleSubmit"],"mappings":"oGAEA,MAAMA,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAc,sBAEpB,SAASC,EAASF,EAAM,CACtB,MAAMG,EAAe,aAAa,QAAQF,CAAW,EACrD,GAAIE,EAAc,CAChB,KAAM,CAAE,MAAAC,EAAO,QAAAC,CAAO,EAAK,KAAK,MAAMF,CAAY,EAElDH,EAAK,SAAS,MAAM,MAAQI,EAC5BJ,EAAK,SAAS,QAAQ,MAAQK,CAC/B,CACH,CAEA,SAASC,EAAcN,EAAM,CAC3B,MAAMO,EAAgBC,EAAS,IAAM,CACnC,MAAMC,EAAc,aAAa,QAAQR,CAAW,EAC9CS,EAAaD,EAAc,KAAK,MAAMA,CAAW,EAAI,GACrDE,EAAW,CAAC,GAAGX,EAAK,QAAQ,EAAE,OAAO,CAACY,EAAKC,KAC3CA,EAAG,OACLD,EAAIC,EAAG,MAAQA,EAAG,OAEbD,GACN,CAAE,CAAA,EAEL,aAAa,QACXX,EACA,KAAK,UAAU,CAAE,GAAGS,EAAY,GAAGC,CAAQ,CAAE,CACnD,CACG,EAAE,GAAG,EAENX,EAAK,iBAAiB,QAASO,CAAa,CAC9C,CAEA,SAASO,EAAa,EAAG,CACvB,EAAE,eAAc,EAChB,KAAM,CAAE,MAAAV,EAAO,QAAAC,CAAO,EAAK,EAAE,OAAO,SAEhC,CAACD,EAAM,OAAS,CAACC,EAAQ,QAE7B,QAAQ,IAAI,CAAE,MAAOD,EAAM,MAAO,QAASC,EAAQ,KAAK,CAAE,EAC1DD,EAAM,MAAQ,GACdC,EAAQ,MAAQ,GAChB,aAAa,WAAWJ,CAAW,EACrC,CAEAC,EAASF,CAAI,EACbM,EAAcN,CAAI,EAClBA,EAAK,iBAAiB,SAAUc,CAAY"}